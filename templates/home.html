{% extends 'base.html' %}

{% block title %}Home Page{% endblock %}

{% block content %}

 <!-- Button trigger modal -->
<button type="button" class="btn btn-primary" id="updateModalTrigger" style="margin-top: 100px;" data-bs-toggle="modal" data-bs-target="#updateModal">
    Launch demo modal
</button>
  
  <!-- Modal -->
  <div class="modal fade" id="updateModal" tabindex="-1" aria-labelledby="updateModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="myModalLabel">{{ latest_update[2] }}</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <p id="modalContent">{{ latest_update[3].replace('\r\n', '<br>')|safe }}
              </p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
    </div>
  </div>
<script>
    if (document.cookie.indexOf("updated_cookie=false") !== -1) {
        // Log the entire cookie string
        console.log("Cookie String:", document.cookie);
    
        // Log the value of the 'updated_cookie' cookie
        var updatedCookieValue = document.cookie
            .split('; ')
            .find(cookie => cookie.startsWith('updated_cookie='))
            .split('=')[1];
        
        console.log("Value of updated_cookie:", updatedCookieValue);
    
        // Check if the value is false before triggering the modal
        if (updatedCookieValue === 'false') {
            // Delay the execution of the click event by 100 milliseconds
            setTimeout(function() {
                // Trigger the modal
                document.getElementById('updateModalTrigger').click();
            }, 100);
    
            // Update the value of the 'updated_cookie' to true
            document.cookie = "updated_cookie=true";
        }
    }    
</script>

{% endblock %}